{% load static %}
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!--CSS-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link href="{% static 'app/css/animate.css'%}" rel="stylesheet"/>
        <link href="{% static 'app/css/bootstrap.min.css'%}" rel="stylesheet"/>
        <link href="{% static 'app/css/font-awesome.min.css'%}" rel="stylesheet"/>
        <link href="{% static 'app/css/main.css'%}" rel="stylesheet" type="text/css"/>
        <link href="{% static 'app/css/prettyPhoto.css'%}" rel="stylesheet"/>
        <link href="{% static 'app/css/price-range.css'%}" rel="stylesheet"/>
        <link href="{% static 'app/css/responsive.css'%}" rel="stylesheet"/>
        <link href="{% static 'app/css/style.css'%}" rel="stylesheet" type="text/css"/>
        <!--JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
        <script src="{% static 'app/js/bootstrap.min.js'%}"> </script>
        <script src="{% static 'app/js/contact.js'%}"> </script>
        <script src="{% static 'app/js/gmaps.js'%}"> </script>
        <script src="{% static 'app/js/html5shiv.js'%}"> </script>
        <script src="{% static 'app/js/jquery.js'%}"> </script>
        <script src="{% static 'app/js/jquery.prettyPhoto.js'%}"> </script>
        <script src="{% static 'app/js/jquery.scrollUp.min.js'%}"> </script>
        <script src="{% static 'app/js/main.js'%}"> </script>
        <script src="{% static 'app/js/price-range.js'%}"> </script>
        <title>Web bán hàng online</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="">
    </head>
    <style>
    
      .carousel-inner {
          display: flex;
          justify-content: auto ;
          align-items: center;
          height: 80vh; 
          left: 200px;
      }

      .carousel-item img {
          max-width: 40%; 
          max-height: 80vh; 
          object-fit: auto;
      }

      .product {
          border: 1px solid #ccc;
          padding: 20px;
          margin: 20px;
          text-align: center;
          width: 300px;
      }

      .add-to-cart {
          background-color: #28a745;
          color: white;
          padding: 10px 20px;
          border: none;
          cursor: pointer;
      }

      .add-to-cart:hover {
          background-color: #218838;
      }

        #cart {
            position: fixed;
            top: 0;
            right: 0;
            width: 300px;
            background-color: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 9999;
        }
    
        #cart h4 {
            margin-top: 0;
        }
    
        #cart-items {
            max-height: 200px;
            overflow-y: auto;
        }
    
        #cart-total {
            font-weight: bold;
            margin-top: 10px;
        }
    
        #checkout-button {
            display: block;
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }
    
        .modal-content {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            z-index: 9999;
        }
    
        .modal-content h2 {
            margin-top: 0;
        }
    
        .modal-content label {
            display: block;
            margin-bottom: 5px;
        }
    
        .modal-content input[type="text"],
        .modal-content input[type="password"] {
            width: 100%;
            padding: 5px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
        }
    
        .modal-content button[type="submit"] {
            display: block;
            width: 100%;
            padding: 8px 0;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }
    
        .close {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
        }
      #checkout-button:hover {
          background-color: #0056b3;
      }
  </style>

    <body>
        <!--Menu-->

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">
                <img src="{% static 'app/images/logo.png'%}" width="200" height= "50">
              </a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Shop
                    </a>  
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <li><a class="dropdown-item" href="#">Products</a></li>
                      <li><a class="dropdown-item" href="#">Product Detail</a></li>
                      <li><a class="dropdown-item" href="#">Check Out</a></li>
                      <li><a class="dropdown-item" href="#">Cart</a></li>
                      <li><hr class="dropdown-divider"></li>

                    </ul>
                    <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        Blog
                      </a>  
                      <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#">Blog List</a></li>
                        <li><a class="dropdown-item" href="#">Blog Single</a></li>
                        
                      </ul>
                    </li>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Contact </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <li><a class="dropdown-item" href="#">Contact1</a></li>
                      <li><a class="dropdown-item" href="#">Contact2</a></li>
                    </ul>
                  </li>
                  
                </ul>
                <form class="d-flex">
                  <input class="form-control me-2" type="search" placeholder="Tìm kiếm sản phẩm" aria-label="Tìm kiếm">
                  <button class="btn btn-outline-success" type="submit">Tìm kiếm</button>
                </form>

              </div>
              <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    User
                  </a>  
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                    <li><a class="dropdown-item" href="#">Trang cá nhân</a></li>
                    <li><a class="dropdown-item" href="#">Đơn hàng</a></li>
                    <li><a class="dropdown-item" href="#">Đăng xuất</a></li>
                  </ul>
                  <li class="nav-item">
                    <a class="nav-link " href="#">Giỏ hàng</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link " href="#">Đăng nhập</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link " href="#">Đăng kí</a>
                  </li>
                </li>
              </ul>
            </div>
          </nav>

          <!--Main Body-->
          {% block banner_slider %}
          <div id="carouselExampleDark" class="carousel carousel-dark slide">
            <div class="carousel-indicators">
              <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
              <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1" aria-label="Slide 2"></button>
              <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2" aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
              <div class="carousel-item active" data-bs-interval="10000">
                <img src="{% static "app/images/im1.jpg" %}" class="d-block w-100" alt="..." height="450">
                <div class="carousel-caption d-none d-md-block">
                  <p>Phong cách đỉnh cao, tự tin tỏa sáng.</p>
                </div>
              </div>
              <div class="carousel-item" data-bs-interval="2000">
                <img src="{% static "app/images/im2.jpg" %}" class="d-block w-100" alt="..." height="450">
                <div class="carousel-caption d-none d-md-block">
                  <p>Biến tấu thời trang, dẫn đầu xu hướng</p>
                </div>
              </div>
              <div class="carousel-item">
                <img src="{% static "app/images/im3.jpg" %}" class="d-block w-100" alt="..." height="450">
                <div class="carousel-caption d-none d-md-block">              
                  <p>Nâng tầm vẻ đẹp, khẳng định cá tính</p>
                </div>
              </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
          {% endblock banner_slider %}


          <div class="container">
              <div class="row">
                  <div class="col-md-4">
                      <div class="product">
                          <img src="{% static 'app/images/im4.jpg' %}" alt="Product 1" class="img-fluid">
                          <h4>Đồ bộ nam chất thun lạnh in Ice Ice đường ray</h4>
                          <p>Giá: 100.000 VND</p>
                          <button class="add-to-cart" data-product-id="1" data-product-name="Sản phẩm 1" data-product-price="100000">Thêm vào giỏ hàng</button>
                      </div>
                  </div>
                  <div class="col-md-4">
                      <div class="product">
                          <img src="{% static 'app/images/im5.jpg' %}" alt="Product 2" class="img-fluid">
                          <h4>Áo sơ mi nam dài tay chất cotton lụa chống nhăn thấm hút bảng màu basic</h4>
                          <p>Giá: 200.000 VND</p>
                          <button class="add-to-cart" data-product-id="2" data-product-name="Sản phẩm 2" data-product-price="200000">Thêm vào giỏ hàng</button>
                      </div>
                  </div>
                  <div class="col-md-4">
                      <div class="product">
                          <img src="{% static 'app/images/im6.jpg' %}" alt="Product 3" class="img-fluid">
                          <h4>Thắt lưng nam da cao cấp khóa hợp kim tự động sang trọng lịch lãm</h4>
                          <p>Giá: 300.000 VND</p>
                          <button class="add-to-cart" data-product-id="3" data-product-name="Sản phẩm 3" data-product-price="300000">Thêm vào giỏ hàng</button>
                      </div>
                  </div>
                  <div class="col-md-4">
                    <div class="product">
                        <img src="{% static 'app/images/im7.jpg' %}" alt="Product 4" class="img-fluid">
                        <h4>Quần Đùi Nữ Mặc Nhà Short Nữ Tập Gym Yoga</h4>
                        <p>Giá: 120.000 VND</p>
                        <button class="add-to-cart" data-product-id="4" data-product-name="Sản phẩm 4" data-product-price="120000">Thêm vào giỏ hàng</button>
                    </div>
                </div>
                <div class="col-md-4">
                  <div class="product">
                      <img src="{% static 'app/images/im8.jpg' %}" alt="Product 5" class="img-fluid">
                      <h4>Quần lót nữ lụa băng viền may cạp ren hoa mềm mại</h4>
                      <p>Giá: 40.000 VND</p>
                      <button class="add-to-cart" data-product-id="5" data-product-name="Sản phẩm 5" data-product-price="40000">Thêm vào giỏ hàng</button>
                  </div>
              </div>
              <div class="col-md-4">
                <div class="product">
                    <img src="{% static 'app/images/im9.jpg' %}" alt="Product 6" class="img-fluid">
                    <h4>Áo hai dây CRLNHC ôm dáng thiết kế không đều phối nút màu trơn thời trang mùa hè cho nữ</h4>
                    <p>Giá: 150.000 VND</p>
                    <button class="add-to-cart" data-product-id="6" data-product-name="Sản phẩm 6" data-product-price="150000">Thêm vào giỏ hàng</button>
                </div>
            </div>
              </div>
          </div>

           <!--Modals-->
        <!-- Login Modal -->
        <div id="loginModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Đăng nhập</h2>
            <form id="login-form">
              <label for="login-username">Tên đăng nhập:</label>
              <input type="text" id="login-username" name="username" required>
              <label for="login-password">Mật khẩu:</label>
              <input type="password" id="login-password" name="password" required>
              <button type="submit">Đăng nhập</button>
            </form>
          </div>
        </div>

        <!-- Register Modal -->
        <div id="registerModal" class="modal">
          <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Đăng ký</h2>
            <form id="register-form">
              <label for="register-username">Tên đăng nhập:</label>
              <input type="text" id="register-username" name="username" required>
              <label for="register-password">Mật khẩu:</label>
              <input type="password" id="register-password" name="password" required>
              <button type="submit">Đăng ký</button>
            </form>
          </div>
        </div>

          
          <div id="cart">
              <h4>Giỏ hàng</h4>
              <div id="cart-items">
                  <!-- Items will be added here dynamically -->
              </div>
              <div id="cart-total">
                  Tổng: 0 VND
              </div>
              <button id="checkout-button">Thanh toán</button>
          </div>

    <!--script-->
        <script>
          
          $(document).ready(function() {
            // Xử lý khi người dùng gửi form tìm kiếm
            $('form').submit(function(event) {
                event.preventDefault(); // Ngăn chặn gửi form mặc định
    
                var searchTerm = $(this).find('input[type="search"]').val().toLowerCase(); // Lấy giá trị từ ô tìm kiếm và chuyển sang chữ thường
    
                
                $('.product').each(function() {
                    var productName = $(this).find('h4').text().toLowerCase(); 
                    if (productName.indexOf(searchTerm) === -1) { 
                        $(this).hide(); // Ẩn sản phẩm
                    } else {
                        $(this).show(); // Hiển thị sản phẩm
                    }
                });
            });
        });
          $(document).ready(function() {
              function updateCartTotal() {
                  var total = 0;
                  $('.cart-item').each(function() {
                      var price = $(this).data('product-price');
                      total += price;
                  });
                  $('#cart-total').text('Tổng: ' + total + ' VND');
              }

              $('.add-to-cart').click(function() {
                  var productId = $(this).data('product-id');
                  var productName = $(this).data('product-name');
                  var productPrice = $(this).data('product-price');

                  var cartItem = '<div class="cart-item" data-product-id="' + productId + '" data-product-price="' + productPrice + '">' +
                                  '<p>' + productName + ' - ' + productPrice + ' VND</p>' +
                                  '</div>';

                  $('#cart-items').append(cartItem);
                  updateCartTotal();
              });

              $('#checkout-button').click(function() {
                  alert('Thanh toán thành công!');
                  $('#cart-items').empty();
                  updateCartTotal();
              });

              var loginModal = document.getElementById("loginModal");
              var registerModal = document.getElementById("registerModal");
              var loginBtn = document.getElementById("login-btn");
              var registerBtn = document.getElementById("register-btn");
              var logoutBtn = document.getElementById("logout-btn");
              var span = document.getElementsByClassName("close");

              loginBtn.onclick = function() {
                  loginModal.style.display = "block";
              }

              registerBtn.onclick = function() {
                  registerModal.style.display = "block";
              }

              for (var i = 0; i < span.length; i++) {
                  span[i].onclick = function() {
                      loginModal.style.display = "none";
                      registerModal.style.display = "none";
                  }
              }

              window.onclick = function(event) {
                  if (event.target == loginModal) {
                      loginModal.style.display = "none";
                  }
                  if (event.target == registerModal) {
                      registerModal.style.display = "none";
                  }
              }

              // Handle Registration
              $('#register-form').submit(function(e) {
                  e.preventDefault();
                  var username = $('#register-username').val();
                  var password = $('#register-password').val();

                  var users = JSON.parse(localStorage.getItem('users')) || [];
                  var userExists = users.some(user => user.username === username);

                  if (userExists) {
                      alert('Tên đăng nhập đã tồn tại!');
                  } else {
                      users.push({ username: username, password: password });
                      localStorage.setItem('users', JSON.stringify(users));
                      alert('Đăng ký thành công!');
                      registerModal.style.display = "none";
                  }
              });

              // Handle Login
              $('#login-form').submit(function(e) {
                  e.preventDefault();
                  var username = $('#login-username').val();
                  var password = $('#login-password').val();

                  var users = JSON.parse(localStorage.getItem('users')) || [];
                  var user = users.find(user => user.username === username && user.password === password);

                  if (user) {
                      alert('Đăng nhập thành công!');
                      loginModal.style.display = "none";
                  } else {
                      alert('Tên đăng nhập hoặc mật khẩu không đúng!');
                  }
              });

              logoutBtn.onclick = function() {
                  alert('Đăng xuất thành công!');
              };
          });
        </script>
    </body>
</html>